<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Style-Type" content="text/css" />
  <meta name="generator" content="pandoc" />
  <title></title>
  <style type="text/css">code{white-space: pre;}</style>
  <style type="text/css">
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; }
code > span.dt { color: #902000; }
code > span.dv { color: #40a070; }
code > span.bn { color: #40a070; }
code > span.fl { color: #40a070; }
code > span.ch { color: #4070a0; }
code > span.st { color: #4070a0; }
code > span.co { color: #60a0b0; font-style: italic; }
code > span.ot { color: #007020; }
code > span.al { color: #ff0000; font-weight: bold; }
code > span.fu { color: #06287e; }
code > span.er { color: #ff0000; font-weight: bold; }
  </style>
  <link rel="stylesheet" href="../css/pmag.css" type="text/css" />
</head>
<body>
<div id="header_wrap">
   <h1><a href="https://www.facebook.com/groups/programmerMagazine">程式人雜誌</a> <sub> --  <a href="https://dl.dropbox.com/u/101584453/pmag/201306/htm/home.html">2013 年 6 月號</a> (開放公益出版品)</sub></h1>
</div>
<div id="content">
<div id="TOC">
<ul>
<li><a href="#arduino入門教學8-使用光敏電阻控制-led-的開關-作者cooper-maa">Arduino入門教學(8) – 使用光敏電阻控制 LED 的開關 (作者：Cooper Maa)</a></li>
</ul>
</div>
<h2 id="arduino入門教學8-使用光敏電阻控制-led-的開關-作者cooper-maa"><a href="#arduino入門教學8-使用光敏電阻控制-led-的開關-作者cooper-maa">Arduino入門教學(8) – 使用光敏電阻控制 LED 的開關 (作者：Cooper Maa)</a></h2>
<h3 id="實驗目的"><a href="#實驗目的">實驗目的</a></h3>
<p>利用光敏電阻做一個 LED 的自動開關，在光線不足時，自動打開 LED 燈，反之，光線充足時便關掉 LED 燈。</p>
<div class="figure">
<img src="../img/Arduino_LightResister.png" />
</div>
<h3 id="材料"><a href="#材料">材料</a></h3>
<ul>
<li>麵包板 x 1</li>
<li>Arduino 主板 x 1</li>
<li>光敏電阻(photocell) x 1</li>
<li>220 ohm 電阻 x 1</li>
<li>10k ohm 電阻 x 1</li>
<li>單心線 x N</li>
<li>接線</li>
</ul>
<p>光敏電阻一支腳接到 5V，另一支腳串接一顆 10k 電阻接到 analog pin 2 LED 接到 pin9 和 GND，長腳(陽極)串接一顆 220 ohm 電阻到 pin9，短腳(陰極)直接接到 GND</p>
<div class="figure">
<img src="../img/Arduino_LightResister_board1.png" />
</div>
<h3 id="電路圖"><a href="#電路圖">電路圖</a></h3>
<div class="figure">
<img src="../img/Arduino_LightResister_circuit1.png" />
</div>
<h3 id="程式碼"><a href="#程式碼">程式碼</a></h3>
<p>實驗一(Photocell.pde)：讀取光敏電阻並輸出到 Serial Port，先確定光敏電阻可以運作</p>
<pre class="sourceCode CPP"><code class="sourceCode cpp"><span class="co">// LAB8 - 讀取光敏電阻 (v1)</span>

<span class="dt">int</span> photocellPin = <span class="dv">2</span>; <span class="co">// 光敏電阻 (photocell) 接在 anallog pin 2</span>
<span class="dt">int</span> photocellVal = <span class="dv">0</span>; <span class="co">// photocell variable</span>

<span class="dt">void</span> setup() {
  Serial.begin(<span class="dv">9600</span>);
}

<span class="dt">void</span> loop() {
  <span class="co">// 讀取光敏電阻並輸出到 Serial Port </span>
  photocellVal = analogRead(photocellPin);
  Serial.println(photocellVal);  
  delay(<span class="dv">100</span>);       
}</code></pre>
<p>假如一切順利的話，如下圖，打開 Serial Monitor 會看到 COM Port 不斷收到一串數據，那便是光敏電阻的讀值，試著用手去遮住光線，應該會看到電阻值跟著變小，代表光敏電阻的運作是正常的。</p>
<div class="figure">
<img src="../img/Arduino_LightResister_screen1.png" />
</div>
<p>實驗二(Photocellv2.pde)：加上 LED 的開關控制，在光線不足時，自動打開 LED 燈，反之，光線充足時便關掉 LED 燈</p>
<pre class="sourceCode CPP"><code class="sourceCode cpp"><span class="co">// LAB8 - 讀取光敏電阻 (v2)</span>

<span class="dt">int</span> photocellPin = <span class="dv">2</span>; <span class="co">// 光敏電阻 (photocell) 接在 anallog pin 2</span>
<span class="dt">int</span> photocellVal = <span class="dv">0</span>; <span class="co">// photocell variable</span>
<span class="dt">int</span> minLight = <span class="dv">200</span>;   <span class="co">// 最小光線門檻值</span>
<span class="dt">int</span> ledPin = <span class="dv">9</span>;
<span class="dt">int</span> ledState = <span class="dv">0</span>; 

<span class="dt">void</span> setup() {
  pinMode(ledPin, OUTPUT); 
  Serial.begin(<span class="dv">9600</span>);
}

<span class="dt">void</span> loop() {
  <span class="co">// 讀取光敏電阻並輸出到 Serial Port </span>
  photocellVal = analogRead(photocellPin);
  Serial.println(photocellVal);   
  
  <span class="co">// 光線不足時打開 LED</span>
  <span class="kw">if</span> (photocellVal &lt; minLight &amp;&amp; ledState == <span class="dv">0</span>) {
    digitalWrite(ledPin, HIGH); <span class="co">// turn on LED</span>
    ledState = <span class="dv">1</span>;
  }
  
  <span class="co">// 光線充足時關掉 LED</span>
  <span class="kw">if</span> (photocellVal &gt; minLight &amp;&amp; ledState == <span class="dv">1</span>) {
    digitalWrite(ledPin, LOW); <span class="co">// turn off LED</span>
    ledState = <span class="dv">0</span>;
  }  
  
  delay(<span class="dv">100</span>);       
}</code></pre>
<h3 id="範例照片影片"><a href="#範例照片影片">範例照片／影片</a></h3>
<ul>
<li>Arduino 筆記 -- Lab8 使用光敏電阻控制 LED 的開關
<ul>
<li><a href="http://youtu.be/3qLCi0Ughk0">http://youtu.be/3qLCi0Ughk0</a></li>
</ul></li>
</ul>
<h3 id="動動腦"><a href="#動動腦">動動腦</a></h3>
<p>現在的筆記型電腦，通常都會自動調整螢幕背光亮度，在光線比較充足時，跟著調高背光亮度，在環境比較暗時，就降低背光的亮度，這樣使用者在操作筆電時就不會有不適的感覺，在暗的地方螢幕就不會太刺眼，在亮的地方也不怕不看到螢幕上的東西。試解釋筆電自動調整背光的原理。</p>
<p>【本文作者為馬萬圳，原文網址為： <a href="http://coopermaa2nd.blogspot.tw/2010/12/arduino-lab8-led.html">http://coopermaa2nd.blogspot.tw/2010/12/arduino-lab8-led.html</a> ，由陳鍾誠編輯後納入本雜誌】</p>
</div>
<div id="footer">
<a href="https://www.facebook.com/groups/programmerMagazine/">程式人雜誌</a> ，採用 <a href="http://creativecommons.org/licenses/by-sa/3.0/tw/ ">創作共用：姓名標示、相同方式分享</a> 授權，歡迎加入 <a href="https://www.facebook.com/groups/programmerMagazine/">雜誌社團</a>
</div>
</body>
</html>
